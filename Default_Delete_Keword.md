# 가독성을 위해 default와 delete 키워드를 사용하자
<br>

## [배경]

클래스 작성 시 우리가 직접 작성하지 않아도 기본적으로 컴파일러가 생성해주는 것들이 있다. 그 대표적인 예로 <u>기본 생성자</u>, <u>기본 소멸자</u>, <u>기본 복사생성자</u>, <u>기본 대입 연산자</u> 등이 그렇다.

<br>

기본적으로 컴파일러가 생성해준 복사생성자와 대입 연산자는 객체 복사 시 <b>얕은 복사</b>를 수행한다. 물론 멤버 변수가 값 형식일 경우 또는 주소를 그대로 복사해도 될 경우 깊은 복사를 하지 않아도 된다. 이 경우는 컴파일러가 알아서 만들어주는 것들을 써도 되기에 굳이 복사 생성자와 대입 연산자를 작성하지 않아도 되는 경우이다. 

<br>

하지만 이는 작성자에게만 가독성이 좋은 코드이며, 코드가 매우 길다면 자기자신도 헷갈릴 수가 있다. 다른 사람이 보기엔 이 작성자가 복사 생성자와 대입 연산자를 실수로 구현하지 않았는지 의도적으로 구현하지 않았는지 알아채기가 어려울 수 있다. 물론 코드를 분석해보면 얕은 복사를 해도 괜찮다는 것을 알 수 있겠지만 한 눈에 알아보기가 쉽지 않으며, 의도가 명확하지가 않다는 단점이 있다. 프로그래밍에선 뭐든지 명확한 것이 좋기 때문에 할 수 있으면 명확히 해주는 것이 모두에게 좋다.

<br>


## [default 키워드]



C++ 11에선 <b>default</b> 라는 키워드를 통해 이 의도를 명확히 전달해줄 수 있다. default는 다음과 같이 사용한다.

```C++
class Foo
{
public:
   ...
   Foo(const Foo& other) = default;
   Foo& operator=(const Foo& rhs) = default;
   ...
};
```

<br>
위와 같이 default 키워드를 사용하면 컴파일러가 만들어준 기본 복사 생성자 및 기본 대입 연산자를 사용하겠다는 뜻이다. 컴파일러에겐 의미가 동일하지만, 이는 <strong><i>"깊은 복사를 하지 않아도 되므로 컴파일러가 구현해주는 디폴트 함수 및 연산자를 사용하겠다"</i></strong> 라고 명시적으로 표시해주는 것이다. 코드를 읽는 사람은 이 클래스가 얕은 복사를 해도 된다는 명확한 의도를 받을 수 있다.
<br><br>

기본 생성자와 소멸자도 마찬가지이다. 메모리 할당 또는 해제가 필요없거나 기본 생성자와 소멸자를 그대로 사용해도된다면 default 키워드를 통해 명시적으로 <strong><i>"디폴트 값을 사용하겠다"</i></strong> 라고 표시해주는 것이 좋다.  

<br>



## [delete 키워드]

그럼 반대로 컴파일러가 생성해주는 디폴트 값이 필요없어 생성되지 않도록 하고 싶을 수도 있다. delete 키워드는 컴파일러가 자동으로 만들어주는 것을 막는 것이다.


예를 들어 해당 클래스 객체는 복사가 불가능하도록 만들고 싶다고 해보자. delete 키워드를 모른다면 다음과 같이 private 영역으로 옮겨서 클래스 외부에서 사용하지 못하도록 일종의 트릭을 사용할 수 있다. 하지만 이는 복사 생성자와 대입 연산자를 생성하지 않은 것이 아니라 생성 후 사용하지 못하도록 막아놓은 것이다. 완전 깔끔한 해결법이라고 볼 순 없다.

```C++
class Foo
{
public:
   ...
   
private:
   Foo(const Foo& other) {}
   Foo& operator=(const Foo& rhs) {}
   ...
};
```

<br>
<br>이럴 경우 다음과 같이 delete 키워드를 사용하면 명시적으로 복사를 하지 않겠다는 의도를 줄 수 있다.


```C++
class Foo
{
public:
   ...
   Foo(const Foo& other) = delete;
   Foo& operator=(const Foo& rhs) = delete;
   ...
};
```

<br>
<br>delete 키워드가 선언된 복사 생성자를 호출하려고 해보면 다음과 같은 에러 메세지를 준다.
해석해보면 <strong><i>"MyClass 클래스의 복사 생성자가 참조될 수 없습니다. 삭제된 함수입니다"</i></strong> 라고 명확하게 에러 메세지를 전달해준다.

<br>

![image](https://user-images.githubusercontent.com/46551002/75609057-bf17c380-5b48-11ea-9492-8727b3047807.png)
